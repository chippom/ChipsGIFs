document.addEventListener("DOMContentLoaded",function(){var o=new IntersectionObserver(function(e){e.forEach(function(t){if(t.isIntersecting){var i=t.target;i.dataset.gif&&i.src!==i.dataset.gif&&(i.src=i.dataset.gif,o.unobserve(i))}})},{rootMargin:"800px"});document.querySelectorAll(".gif-item img").forEach(function(e,t){var i=e.src;e.dataset.gif=i;t<6?e.src=i:o.observe(e)}),document.querySelectorAll(".gif-item").forEach(function(e){e.onclick=function(){var t=e.querySelector("img"),i=document.getElementById("overlay-img"),o=document.getElementById("overlay");t&&i&&o&&(i.src=t.dataset.gif||t.src,o.classList.add("active"))}});var e=document.getElementById("overlay");e&&(e.onclick=function(){this.classList.remove("active");var e=document.getElementById("overlay-img");e&&(e.src="")});var t=document.getElementById("toggleDarkMode");t&&t.addEventListener("click",function(){document.body.classList.toggle("dark-mode")}),document.querySelectorAll(".download-btn").forEach(function(e){e.onclick=function(){var t=e.closest(".gif-item"),i=t.querySelector("img"),n=t.querySelector(".download-count");if(i&&i.dataset.gif){var a=e.textContent;e.textContent="Downloading...";e.disabled=!0;var r=document.createElement("a");r.href=i.dataset.gif;r.download="";r.target="_blank";document.body.appendChild(r);r.click();document.body.removeChild(r);setTimeout(function(){e.textContent=a,e.disabled=!1},1500);var d=parseInt(n.textContent.replace(/\D/g,""),10)||0;n.textContent="Downloads: "+(d+1)}}})});